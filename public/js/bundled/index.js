var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},r=function(t){return t&&t.Math==Math&&t};e=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||function(){return this}()||e||Function("return this")();var n,o;n=!(o=function(t){try{return!!t()}catch(t){return!0}})((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}));var a,i,u,c={};u=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}));var s=Function.prototype,l=s.call,f=u&&s.bind.bind(l,l);c=u?f:function(t){return function(){return l.apply(t,arguments)}};var p,y={},d="object"==typeof document&&document.all,v=(p={all:d,IS_HTMLDDA:void 0===d&&void 0!==d}).all;y=p.IS_HTMLDDA?function(t){return"function"==typeof t||t===v}:function(t){return"function"==typeof t};var g,m,h,b={};h=function(t){return null==t};var w=TypeError;m=function(t){if(h(t))throw w("Can't call method on "+t);return t};var S=Object;g=function(t){return S(m(t))};var A=c({}.hasOwnProperty);b=Object.hasOwn||function(t,e){return A(g(t),e)};var T,O=Function.prototype,E=n&&Object.getOwnPropertyDescriptor,j=b(O,"name"),_={EXISTS:j,PROPER:j&&"something"===function(){}.name,CONFIGURABLE:j&&(!n||n&&E(O,"name").configurable)}.CONFIGURABLE,P={},C={},I=Object.defineProperty;T=function(t,r){try{I(e,t,{value:r,configurable:!0,writable:!0})}catch(n){e[t]=r}return r};var k="__core-js_shared__",D=e[k]||T(k,{});C=D;var M=c(Function.toString);y(C.inspectSource)||(C.inspectSource=function(t){return M(t)}),P=C.inspectSource;var R,q,x=e.WeakMap;q=y(x)&&/native code/.test(String(x));var F={},U=p.all;F=p.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:y(t)||t===U}:function(t){return"object"==typeof t?null!==t:y(t)};var B,z,N,V={},W=e.document,Y=F(W)&&F(W.createElement);N=function(t){return Y?W.createElement(t):{}},z=!n&&!o((function(){return 7!=Object.defineProperty(N("div"),"a",{get:function(){return 7}}).a}));var H;H=n&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}));var $,G=String,Z=TypeError;$=function(t){if(F(t))return t;throw Z(G(t)+" is not an object")};var X,J,K={},Q=Function.prototype.call;K=u?Q.bind(Q):function(){return Q.apply(Q,arguments)};var tt,et={};tt=function(t,r){return arguments.length<2?(n=e[t],y(n)?n:void 0):e[t]&&e[t][r];var n};var rt={};rt=c({}.isPrototypeOf);var nt,ot,at,it={};it="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var ut,ct,st=e.process,lt=e.Deno,ft=st&&st.versions||lt&&lt.version,pt=ft&&ft.v8;pt&&(ct=(ut=pt.split("."))[0]>0&&ut[0]<4?1:+(ut[0]+ut[1])),!ct&&it&&(!(ut=it.match(/Edge\/(\d+)/))||ut[1]>=74)&&(ut=it.match(/Chrome\/(\d+)/))&&(ct=+ut[1]),at=ct;var yt=e.String;nt=(ot=!!Object.getOwnPropertySymbols&&!o((function(){var t=Symbol();return!yt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&at&&at<41})))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var dt=Object;et=nt?function(t){return"symbol"==typeof t}:function(t){var e=tt("Symbol");return y(e)&&rt(e.prototype,dt(t))};var vt,gt,mt,ht=String;mt=function(t){try{return ht(t)}catch(t){return"Object"}};var bt=TypeError;gt=function(t){if(y(t))return t;throw bt(mt(t)+" is not a function")},vt=function(t,e){var r=t[e];return h(r)?void 0:gt(r)};var wt,St=TypeError;wt=function(t,e){var r,n;if("string"===e&&y(r=t.toString)&&!F(n=K(r,t)))return n;if(y(r=t.valueOf)&&!F(n=K(r,t)))return n;if("string"!==e&&y(r=t.toString)&&!F(n=K(r,t)))return n;throw St("Can't convert object to primitive value")};var At,Tt;(Tt=function(t,e){return C[t]||(C[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Ot,Et=0,jt=Math.random(),_t=c(1..toString);Ot=function(t){return"Symbol("+(void 0===t?"":t)+")_"+_t(++Et+jt,36)};var Pt=e.Symbol,Lt=Tt("wks"),Ct=nt?Pt.for||Pt:Pt&&Pt.withoutSetter||Ot;At=function(t){return b(Lt,t)||(Lt[t]=ot&&b(Pt,t)?Pt[t]:Ct("Symbol."+t)),Lt[t]};var It=TypeError,kt=At("toPrimitive");J=function(t,e){if(!F(t)||et(t))return t;var r,n=vt(t,kt);if(n){if(void 0===e&&(e="default"),r=K(n,t,e),!F(r)||et(r))return r;throw It("Can't convert object to primitive value")}return void 0===e&&(e="number"),wt(t,e)},X=function(t){var e=J(t,"string");return et(e)?e:e+""};var Dt=TypeError,Mt=Object.defineProperty,Rt=Object.getOwnPropertyDescriptor,qt="enumerable",xt="configurable",Ft="writable";B=n?H?function(t,e,r){if($(t),e=X(e),$(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Ft in r&&!r[Ft]){var n=Rt(t,e);n&&n[Ft]&&(t[e]=r.value,r={configurable:xt in r?r[xt]:n[xt],enumerable:qt in r?r[qt]:n[qt],writable:!1})}return Mt(t,e,r)}:Mt:function(t,e,r){if($(t),e=X(e),$(r),z)try{return Mt(t,e,r)}catch(t){}if("get"in r||"set"in r)throw Dt("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var Ut;Ut=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},V=n?function(t,e,r){return B(t,e,Ut(1,r))}:function(t,e,r){return t[e]=r,t};var Bt,zt=Tt("keys");Bt=function(t){return zt[t]||(zt[t]=Ot(t))};var Nt={};Nt={};var Vt,Wt,Yt,Ht="Object already initialized",$t=e.TypeError,Gt=e.WeakMap;if(q||C.state){var Zt=C.state||(C.state=new Gt);Zt.get=Zt.get,Zt.has=Zt.has,Zt.set=Zt.set,Vt=function(t,e){if(Zt.has(t))throw $t(Ht);return e.facade=t,Zt.set(t,e),e},Wt=function(t){return Zt.get(t)||{}},Yt=function(t){return Zt.has(t)}}else{var Xt=Bt("state");Nt[Xt]=!0,Vt=function(t,e){if(b(t,Xt))throw $t(Ht);return e.facade=t,V(t,Xt,e),e},Wt=function(t){return b(t,Xt)?t[Xt]:{}},Yt=function(t){return b(t,Xt)}}var Jt=(R={set:Vt,get:Wt,has:Yt,enforce:function(t){return Yt(t)?Wt(t):Vt(t,{})},getterFor:function(t){return function(e){var r;if(!F(e)||(r=Wt(e)).type!==t)throw $t("Incompatible receiver, "+t+" required");return r}}}).enforce,Kt=R.get,Qt=String,te=Object.defineProperty,ee=c("".slice),re=c("".replace),ne=c([].join),oe=n&&!o((function(){return 8!==te((function(){}),"length",{value:8}).length})),ae=String(String).split("String"),ie=i=function(t,e,r){"Symbol("===ee(Qt(e),0,7)&&(e="["+re(Qt(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!b(t,"name")||_&&t.name!==e)&&(n?te(t,"name",{value:e,configurable:!0}):t.name=e),oe&&r&&b(r,"arity")&&t.length!==r.arity&&te(t,"length",{value:r.arity});try{r&&b(r,"constructor")&&r.constructor?n&&te(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var o=Jt(t);return b(o,"source")||(o.source=ne(ae,"string"==typeof e?e:"")),t};Function.prototype.toString=ie((function(){return y(this)&&Kt(this).source||P(this)}),"toString"),a=function(t,e,r){return r.get&&i(r.get,e,{getter:!0}),r.set&&i(r.set,e,{setter:!0}),B(t,e,r)};var ue;ue=function(){var t=$(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e};var ce=e.RegExp,se=ce.prototype;n&&o((function(){var t=!0;try{ce(".","d")}catch(e){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",o=function(t,n){Object.defineProperty(e,t,{get:function(){return r+=n,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var i in t&&(a.hasIndices="d"),a)o(i,a[i]);return Object.getOwnPropertyDescriptor(se,"flags").get.call(e)!==n||r!==n}))&&a(se,"flags",{configurable:!0,get:ue});var le,fe;fe="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView;var pe,ye={},de={};de[At("toStringTag")]="z",pe="[object z]"===String(de);var ve,ge=c({}.toString),me=c("".slice);ve=function(t){return me(ge(t),8,-1)};var he=At("toStringTag"),be=Object,we="Arguments"==ve(function(){return arguments}());ye=pe?ve:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=be(t),he))?r:we?ve(e):"Object"==(n=ve(e))&&y(e.callee)?"Arguments":n};var Se;Se=function(t,e,r,n){n||(n={});var o=n.enumerable,a=void 0!==n.name?n.name:e;if(y(r)&&i(r,a,n),n.global)o?t[e]=r:T(e,r);else{try{n.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=r:B(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t};var Ae,Te={};Ae=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}));var Oe=Bt("IE_PROTO"),Ee=Object,je=Ee.prototype;Te=Ae?Ee.getPrototypeOf:function(t){var e=g(t);if(b(e,Oe))return e[Oe];var r=e.constructor;return y(r)&&e instanceof r?r.prototype:e instanceof Ee?je:null};var _e,Pe={};_e=function(t,e,r){try{return c(gt(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}};var Le,Ce=String,Ie=TypeError;Le=function(t){if("object"==typeof t||y(t))return t;throw Ie("Can't set "+Ce(t)+" as a prototype")},Pe=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=_e(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return $(r),Le(n),e?t(r,n):r.__proto__=n,r}}():void 0);var ke,De,Me,Re=R.enforce,qe=R.get,xe=e.Int8Array,Fe=xe&&xe.prototype,Ue=e.Uint8ClampedArray,Be=Ue&&Ue.prototype,ze=xe&&Te(xe),Ne=Fe&&Te(Fe),Ve=Object.prototype,We=e.TypeError,Ye=At("toStringTag"),He=Ot("TYPED_ARRAY_TAG"),$e="TypedArrayConstructor",Ge=fe&&!!Pe&&"Opera"!==ye(e.opera),Ze=!1,Xe={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Je={BigInt64Array:8,BigUint64Array:8},Ke=function(t){var e=Te(t);if(F(e)){var r=qe(e);return r&&b(r,$e)?r[$e]:Ke(e)}},Qe=function(t){if(!F(t))return!1;var e=ye(t);return b(Xe,e)||b(Je,e)};for(ke in Xe)(Me=(De=e[ke])&&De.prototype)?Re(Me)[$e]=De:Ge=!1;for(ke in Je)(Me=(De=e[ke])&&De.prototype)&&(Re(Me)[$e]=De);if((!Ge||!y(ze)||ze===Function.prototype)&&(ze=function(){throw We("Incorrect invocation")},Ge))for(ke in Xe)e[ke]&&Pe(e[ke],ze);if((!Ge||!Ne||Ne===Ve)&&(Ne=ze.prototype,Ge))for(ke in Xe)e[ke]&&Pe(e[ke].prototype,Ne);if(Ge&&Te(Be)!==Ne&&Pe(Be,Ne),n&&!b(Ne,Ye))for(ke in Ze=!0,a(Ne,Ye,{configurable:!0,get:function(){return F(this)?this[He]:void 0}}),Xe)e[ke]&&V(e[ke],He,ke);le={NATIVE_ARRAY_BUFFER_VIEWS:Ge,TYPED_ARRAY_TAG:Ze&&He,aTypedArray:function(t){if(Qe(t))return t;throw We("Target is not a typed array")},aTypedArrayConstructor:function(t){if(y(t)&&(!Pe||rt(ze,t)))return t;throw We(mt(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,r,o,a){if(n){if(o)for(var i in Xe){var u=e[i];if(u&&b(u.prototype,t))try{delete u.prototype[t]}catch(e){try{u.prototype[t]=r}catch(t){}}}Ne[t]&&!o||Se(Ne,t,o?r:Ge&&Fe[t]||r,a)}},exportTypedArrayStaticMethod:function(t,r,o){var a,i;if(n){if(Pe){if(o)for(a in Xe)if((i=e[a])&&b(i,t))try{delete i[t]}catch(t){}if(ze[t]&&!o)return;try{return Se(ze,t,o?r:Ge&&ze[t]||r)}catch(t){}}for(a in Xe)!(i=e[a])||i[t]&&!o||Se(i,t,r)}},getTypedArrayConstructor:Ke,isView:function(t){if(!F(t))return!1;var e=ye(t);return"DataView"===e||b(Xe,e)||b(Je,e)},isTypedArray:Qe,TypedArray:ze,TypedArrayPrototype:Ne};var tr,er,rr,nr={},or=Math.ceil,ar=Math.floor;nr=Math.trunc||function(t){var e=+t;return(e>0?ar:or)(e)},rr=function(t){var e=+t;return e!=e||0===e?0:nr(e)};var ir=Math.min;er=function(t){return t>0?ir(rr(t),9007199254740991):0},tr=function(t){return er(t.length)};var ur,cr,sr=RangeError;cr=function(t){var e=rr(t);if(e<0)throw sr("The argument can't be less than 0");return e};var lr=RangeError;ur=function(t,e){var r=cr(t);if(r%e)throw lr("Wrong offset");return r};var fr=e.RangeError,pr=e.Int8Array,yr=pr&&pr.prototype,dr=yr&&yr.set,vr=le.aTypedArray,gr=le.exportTypedArrayMethod,mr=!o((function(){var t=new Uint8ClampedArray(2);return K(dr,t,{length:1,0:3},1),3!==t[1]})),hr=mr&&le.NATIVE_ARRAY_BUFFER_VIEWS&&o((function(){var t=new pr(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));gr("set",(function(t){vr(this);var e=ur(arguments.length>1?arguments[1]:void 0,1),r=g(t);if(mr)return K(dr,this,r,e);var n=this.length,o=tr(r),a=0;if(o+e>n)throw fr("Wrong length");for(;a<o;)this[e+a]=r[a++]}),!mr||hr);const br=(t,e)=>{document.querySelector("body").insertAdjacentHTML("afterbegin",`<div class="alert alert--${t}">${e}</div>`),setTimeout((()=>{document.querySelector(".alert").remove()}),4e3)},wr=async(t,e)=>{try{"success"===(await axios({method:"POST",url:"/api/v1/users/login",data:{email:t,password:e}})).data.status&&(br("success","Logged in successfully!"),setTimeout((()=>{location.assign("/")}),1e3))}catch(t){br("error",t.response.data.message)}},Sr=t=>{var e=L.map("map",{style:"mapbox://styles/mapbox/light-v10",zoomControl:!1,scrollWheelZoom:!1}).setView([51.5,-.09],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',id:"mapbox/streets-v11"}).addTo(e);var r=L.icon({iconUrl:"/img/pin.png",iconSize:[32,40],iconAnchor:[16,45],popupAnchor:[0,-50]});const n=[];t.forEach((t=>{const[o,a]=t.coordinates;L.marker([a,o],{icon:r}).addTo(e).bindPopup(`${t.day} | ${t.description}`,{autoClose:!1,className:"mapPopup"}).openPopup(),n.push([a,o])}));const o=new L.LatLngBounds(n).pad(.7);e.fitBounds(o)},Ar=async(t,e)=>{try{const r="update-password"===e?"http://localhost:3000/api/v1/users/updatePassword":"http://localhost:3000/api/v1/users/updateMe";"success"===(await axios({method:"PATCH",url:r,data:t})).data.status&&(br("success","Settings saved successfully!"),setTimeout((()=>{location.reload(!0)}),1e3))}catch(t){br("error","Something went wrong")}},Tr=async t=>{try{"success"===(await axios({method:"POST",url:"http://localhost:3000/api/v1/users/forgotPassword",data:{email:t}})).data.status&&(br("success","Your password reset token sent successfully! Check your email."),setTimeout((()=>{location.reload(!0)}),1e3))}catch(t){br("error","Something went wrong")}};var Or;const Er=Stripe("pk_test_51N6HIVDk98Av3NqoQ96WSALP7U5WhUpyL4KL2hXdGOjdOiZ5zZcH3mZ9oHl4zxXorShqgCUEYYBGZEK2JhP5Jggj00rX8x2LMi");Or=async t=>{try{const e=await axios(`/api/v1/bookings/checkout-session/${t}`);await Er.redirectToCheckout({sessionId:e.data.session.id})}catch(t){br("error",t.response.data.message)}};const jr=document.querySelector(".login-form form"),_r=document.querySelector(".form-user-data"),Pr=document.querySelector(".form-user-settings"),Lr=document.querySelector(".email-form form"),Cr=document.querySelector(".review-form form"),Ir=document.getElementById("map"),kr=document.querySelector(".side-nav"),Dr=document.querySelectorAll(".side-nav__item"),Mr=document.querySelectorAll(".user-tab"),Rr=document.querySelector(".nav__el--logout"),qr=document.getElementById("bookTourBtn");if(jr&&jr.addEventListener("submit",(t=>{t.preventDefault();const e=t.target.elements.email.value,r=t.target.elements.password.value;wr(e,r)})),Lr&&Lr.addEventListener("submit",(t=>{t.preventDefault();const e=t.target.elements.email.value;Tr(e)})),_r&&_r.addEventListener("submit",(t=>{t.preventDefault();const e=new FormData;e.append("name",t.target.elements.name.value),e.append("email",t.target.elements.email.value),e.append("photo",t.target.elements.photo.files[0]),Ar(e)})),Pr&&Pr.addEventListener("submit",(t=>{t.preventDefault();const e=t.target.elements.passwordCurrent.value,r=t.target.elements.password.value,n=t.target.passwordConfirm.value;Ar({passwordCurrent:e,password:r,passwordConfirm:n},"update-password")})),Cr){const t=document.getElementById("ratingValue");Cr.querySelector("#rating").addEventListener("input",(e=>{t.textContent=e.target.value}))}if(kr&&kr.addEventListener("click",(t=>{const e=t.target.closest(".side-nav__item");if(!e)return;const r=e.dataset.id;Dr.forEach(((t,e)=>{t.classList.remove("side-nav--active"),Mr[e].classList.remove("user-tab--active")})),document.querySelector(`.side-nav__item--${r}`).classList.add("side-nav--active"),document.querySelector(`.user-tab--${r}`).classList.add("user-tab--active")})),Ir){Sr(JSON.parse(Ir.dataset.locations))}Rr&&Rr.addEventListener("click",(async()=>{try{"success"===(await axios({method:"GET",url:"/api/v1/users/logout"})).data.status&&(br("success","Logged out successfully!"),setTimeout((()=>{location.assign("/")}),1e3))}catch(t){br("error","Error! Try to log out in a while...")}})),qr&&qr.addEventListener("click",(t=>{t.target.textContent="Proccessing...";const e=t.target.dataset.tourid;Or(e)}));
//# sourceMappingURL=index.js.map
